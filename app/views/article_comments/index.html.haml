.wrapper
  .showMain
    .content
      .article
        .article__title{data: {article: {id: @article.id}}}
          = link_to @article.title.to_s, @article.url
        .article__detail
          .article__detail__publishedAt
            = @article.publishedAt
          .article__detail__author
            = @article.author
        .article__content
          .article__content__image
            = image_tag @article.urlToImage.to_s
          .article_content__description
            = @article.description
      .comments
        - if @comments.present?
          - @comments.zip(@comments.ids) do |c, id|
          - my_evaluation = my_evaluation(@article.id, id)
            .comment{data: {comment: {id: id}}}
              .comment__detail
                .comment__index{data: {index: c.index}}
                  = "#{c.index}" + ":"
                .comment__detail__nickname
                  = c.user.nickname
                .comment__detail__date
                  = time_setting(c.created_at)
              .comment__text{data: {index: c.index}}
                = c.text
              .comment__evaluation
                .comment__evaluation___form
                  - if my_evaluation != "good"
                    = form_with url: good_evaluations_path, class: "evaluation_form_good", local: true do |f|
                      = f.hidden_field :article_id, value: @article.id
                      = f.hidden_field :comment_id, value: id
                      = f.submit "good", class: "good_btn", disabled: (my_evaluation == "bad")
                  - else
                    = form_with url: canceling_good_evaluations_path, class: "evaluation_form_canceling_good", local: true do |f|
                      = f.hidden_field :article_id, value: @article.id
                      = f.hidden_field :comment_id, value: id
                      = f.submit "good", class: "canceling_good_btn"
                  .count_good
                    = counting_evaluation(@article.id, id, "good")
                .comment__evaluation___form
                  - if my_evaluation != "bad"
                    = form_with url: bad_evaluations_path, class: "evaluation_form_bad", local: true do |f|
                      = f.hidden_field :article_id, value: @article.id
                      = f.hidden_field :comment_id, value: id
                      = f.submit "bad", class: "bad_btn", disabled: (my_evaluation == "good")
                  - else
                    = form_with url: canceling_bad_evaluations_path, class: "evaluation_form_canceling_bad", local: true do |f|
                      = f.hidden_field :article_id, value: @article.id
                      = f.hidden_field :comment_id, value: id
                      = f.submit "bad", class: "canceling_bad_btn"
                  .count_bad
                    = counting_evaluation(@article.id, id, "bad")
              .comment__reply#hide
                = "表示"
                .comment__reply__content{style: 'display: none;', data: {index: c.index}}
              %br
        .new_comment

      = form_with model:[@article, @article_comments], local: true, class: "comment__form", id: "new_article_comment" do |f|
        = f.text_area :text, placeholder: "コメントを入力してください", class: "text_area"
        = f.submit "送信", class: "submit_comment"